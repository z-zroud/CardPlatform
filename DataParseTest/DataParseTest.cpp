// DataParseTest.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include "../DataParse/IDataParse.h"
#include "../Util/ParseTLV.h"
#include <cstring>
int main()
{


	//Test ParseTLV
	char* tlvBuffer = "6F688408A000000333010101A55C500E556E696F6E5061792044656269748701019F381BDF60019F66049F02069F03069F1A0295055F2A029A039C019F37045F2D027A689F1101019F120E556E696F6E506179204465626974BF0C0E9F4D020B0ADF4D020C0ADF6101421234";
    char* tlvBuffer2 = "70B39381B03C7B01E12BDCAA437640A4DB515AD8B02A7199F3B2DA854008756070D6CAFD88A33CD75982CBFF5D664B2F7B0AF3C3886CCA6DC31599294B70A33770B7736E20C0DF089C85AF3FE7509D41DA93A247CCDB112F496C51AAC102E304E9A3026AFEA6522AA63A25A9E36312F3A74DF3583E0F29E84A6F22F2C352B0195DB175BA221066A43709B0600BB396A364A0A737FD5BA93E5371C67D3C4AB5BB5429DC995D113FE5D6D754B80B6E69773B1530ADAF";
    char* tlvBuffer3 = "F73E9C9072B632B5C6411E0751DCE65D9314E5B39CB144799C253EF3EF072ED79EAAF65A5B81FD36ED705478D419582569947DEBC93B8D0A23129F89C1FF4E91";
    char* tlvBuffer4 = "9F4681B099102D6B83D1231AA740AF29058F38D365E08865425D6E9F0570F5D340A57E1C02F417391D30AD6001928950A13DED6708871EA839741C8F8EDAF94AF44FC9D6763071EF5E8C578D754047632F94ABB22887325F4EB238E59B0E10C7D5D8643F971F9DFF719E791179B6AD4273E020EC74CDB9BE017006C6F15B7CC88A501B33FEBA45D428C31B4C6ED67CAD59BC24251D3256B4BB80702F426FFF96D9A548402880599D980D1ACD6226F90AFF754D349F48009F470103";
    bool istlv = IsTLV(tlvBuffer4, strlen(tlvBuffer4));

	unsigned int tlvCount = 32;
    TLV pTlvs[32];
    ParseTLV(tlvBuffer4, pTlvs, tlvCount);
    for (int i = 0; i < 1000; i++) {
        memset(pTlvs, 0, sizeof(TLV) * 32);
        //IsBcdTlvStruct(tlvBuffer2, strlen(tlvBuffer2));
        //ParseTLV(tlvBuffer2, pTlvs, tlvCount);
    }

    //Test ParseTL
    char* tlBuffer = "9F7A019F02065F2A02DF6901";
    TL pTls[32];
    unsigned int count = 32;
    ParseTL(tlBuffer, pTls, count);

	//Test Parse AFL
	AFL pAfls[12] = { 0 };
	char* aflBuffer = "100203001008080018030301";
	unsigned int aflCount = 12;
	ParseAFL(aflBuffer, pAfls, aflCount);

    getchar();
    return 0;
}

